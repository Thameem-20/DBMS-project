{% extends 'layout.html' %} {% block title %} Turf Details {% endblock title %}
{% block body %}
<h1 class="turfhead">{{ turf.turf_name }} Details</h1>
<h5 class="turfhead">Location: {{ turf.turf_location }}</h5>
<h5 class="turfhead">Phone: {{ turf.turf_phone }}</h5>

<div class="turftab">
  {% if hosted_games|length==0 %}
  <div class="alert alert-dark" role="alert">
    No games found!, Host a game now.
  </div>

  {% else %}
  <h2>Hosted Games</h2>
  <table border="1" class="table table-striped">
    <thead>
      <tr>
        <th>Game ID</th>
        <th>Sport</th>
        <th>Host Name</th>
        <th>Date</th>
        <th>Time</th>
        <th>Action</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for game in hosted_games %}
      <tr>
        <td>{{ game.id }}</td>
        <td>{{ game.sports }}</td>
        <td>{{ game.host_name }}</td>
        <td>{{ game.game_time.strftime('%d-%m-%Y') }}</td>
        <td>{{ game.game_time.strftime('%H:%M') }}</td>
        <td>
          <a
            class="btn btn-success"
            href="{{ url_for('join_game', turf_id=turf.id, game_id=game.id) }}"
            >Join Game</a
          >
        </td>
        <td>
          {% if player.player_name == current_user.username %}
          <form
            method="POST"
            action="{{ url_for('leave_game', turf_id=turf.id) }}"
          >
            <input type="hidden" name="game_id" value="{{ game.id }}" />
            <button class="btn btn-danger" type="submit">Delete Game</button>
          </form>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
    {% endif %}
  </table>
  <div class="turftab"></div>
  <br />
  <!-- Host Game Option -->
  {% if current_user.is_authenticated %}
  <a class="btn btn-danger" href="{{ url_for('host_game', turf_id=turf.id) }}"
    >Host a Game</a
  >
  {% endif %} {% endblock body %}
</div>
